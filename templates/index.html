<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garage & Camera Control</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        function autoRefresh() {
            setTimeout(() => {
                location.reload();
            }, 5000); // Refresh every 5 seconds
        }
    </script>
</head>
<body onload="autoRefresh()">
    <h1>Garage & Camera Control</h1>

    <p>Garage Status: <strong>{{ 'Open' if garage_open else 'Closed' }}</strong></p>
    <p>Distance from Sensor: <strong>{{ distance if distance is not none else 'N/A' }} mm</strong></p>

    <form action="/toggle" method="post">
        <button class="btn" type="submit" style="background-color: {{ 'red' if garage_open else 'green' }}">
            {{ 'Close Garage' if garage_open else 'Open Garage' }}
        </button>
    </form>

    <h2>Event Log</h2>
    <ul>
        {% for event in events %}
            <li>{{ event }}</li>
        {% endfor %}
    </ul>

    <h2>Camera Feeds</h2>
    <div class="camera-grid">
        <div class="camera">
            <h3>Camera 1</h3>
            <a href="/cam1" target="_blank">
                <img src="/cam1/stream" alt="Camera 1 Feed">
            </a>
        </div>
        <div class="camera">
            <h3>Camera 2</h3>
            <a href="/cam2" target="_blank">
                <img src="/cam2/stream" alt="Camera 2 Feed">
            </a>
        </div>
        <div class="camera">
            <h3>Camera 3</h3>
            <a href="/cam3" target="_blank">
                <img src="/cam3/stream" alt="Camera 3 Feed">
            </a>
        </div>
        <div class="camera">
            <h3>Camera 4</h3>
            <a href="/cam4" target="_blank">
                <img src="/cam4/stream" alt="Camera 4 Feed">
            </a>
        </div>
    </div>

    <style>
        .camera-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            text-align: center;
        }
        .camera img {
            width: 100%;
            max-width: 300px;
            border-radius: 10px;
            border: 2px solid #333;
        }
        .camera h3 {
            margin: 10px 0;
        }
    </style>

</body>
</html>
